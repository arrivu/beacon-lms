(function(){var e=[].indexOf||function(e){for(var t=0,o=this.length;o>t;t++)if(t in this&&this[t]===e)return t;return-1};define(["underscore","i18n!react_files","react","compiled/models/Folder","compiled/collections/FilesCollection","compiled/react/shared/utils/withReactDOM","./ColumnHeaders","./LoadingIndicator","./FolderChild","../modules/customPropTypes","../utils/updateAPIQuerySortParams","../utils/getAllPages","./FilePreview"],function(t,o,r,s,l,i,n,c,a,u,d,h,m){var y;return y=r.createClass({displayName:"SearchResults",propTypes:{contextType:u.contextType,contextId:u.contextId},getInitialState:function(){return{collection:new l}},updateResults:function(e){var o,r,s=this;return r=this.state.collection.url,this.state.collection.url=""+window.location.origin+"/api/v1/"+this.props.contextType+"/"+this.props.contextId+"/files",d(this.state.collection,this.props.query),this.state.collection.url!==r?(this.setState({collection:this.state.collection}),this.state.collection.loadedAll&&t.isEqual(this.props.query.search_term,e.query.search_term)?void 0:(o=function(){return s.isMounted()?s.forceUpdate():void 0},this.state.collection.fetch({data:e.query}).then(o).then(h.bind(null,this.state.collection,o)))):void 0},componentWillReceiveProps:function(e){return this.updateResults(e)},componentWillMount:function(){return this.updateResults(this.props)},componentDidMount:function(){var e=this;return setTimeout(function(){return e.props.onResolvePath({currentFolder:null,rootTillCurrentFolder:null,showingSearchResults:!0,searchResultCollection:e.state.collection})})},render:i(function(){var t=this;return div({role:"grid"},n({to:"search",query:this.props.query,toggleAllSelected:this.props.toggleAllSelected,areAllItemsSelected:this.props.areAllItemsSelected}),this.state.collection.models.sort(s.prototype.childrenSorter.bind(this.state.collection,this.props.query.sort,this.props.query.order)).map(function(o){return a({key:o.cid,model:o,isSelected:e.call(t.props.selectedItems,o)>=0,toggleSelected:t.props.toggleItemSelected.bind(null,o),userCanManageFilesForContext:t.props.userCanManageFilesForContext,dndOptions:t.props.dndOptions})}),c({isLoading:!this.state.collection.loadedAll}),this.state.collection.loadedAll&&0===this.state.collection.length?div({ref:"noResultsFound"},p({},o.t("errors.no_match.your_search",'Your search - "%{search_term}" - did not match any files.',{search_term:this.props.query.search_term})),p({},o.t("errors.no_match.suggestions","Suggestions:")),ul({},li({},o.t("errors.no_match.spelled","Make sure all words are spelled correctly.")),li({},o.t("errors.no_match.keywords","Try different keywords.")),li({},o.t("errors.no_match.three_chars","Enter at least 3 letters in the search box.")))):void 0,null!=this.props.query.preview&&this.state.collection.length?m({params:this.props.params,query:this.props.query,collection:this.state.collection}):void 0)})})})}).call(this);