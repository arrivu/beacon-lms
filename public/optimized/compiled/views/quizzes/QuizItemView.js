(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,i=function(e,i){function o(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return o.prototype=i.prototype,e.prototype=new o,e.__super__=i.prototype,e};define(["i18n!quizzes.index","jquery","underscore","Backbone","compiled/views/PublishIconView","compiled/views/assignments/DateDueColumnView","compiled/views/assignments/DateAvailableColumnView","jst/quizzes/QuizItemView"],function(t,o,n,s,l,r,u,a){var d,p;return d=function(s){function d(){return this.updatePublishState=e(this.updatePublishState,this),this.onDelete=e(this.onDelete,this),this.clickRow=e(this.clickRow,this),p=d.__super__.constructor.apply(this,arguments)}return i(d,s),d.prototype.template=a,d.prototype.tagName="li",d.prototype.className="quiz",d.child("publishIconView","[data-view=publish-icon]"),d.child("dateDueColumnView","[data-view=date-due]"),d.child("dateAvailableColumnView","[data-view=date-available]"),d.prototype.events={click:"clickRow","click .delete-item":"onDelete"},d.prototype.messages={confirm:t.t("confirms.delete_quiz","Are you sure you want to delete this quiz?"),multipleDates:t.t("multiple_due_dates","Multiple Dates")},d.prototype.initialize=function(){return this.initializeChildViews(),this.observeModel(),d.__super__.initialize.apply(this,arguments)},d.prototype.initializeChildViews=function(){return this.publishIconView=!1,this.canManage()&&(this.publishIconView=new l({model:this.model})),this.dateDueColumnView=new r({model:this.model}),this.dateAvailableColumnView=new u({model:this.model})},d.prototype.afterRender=function(){return this.$el.toggleClass("quiz-loading-overrides",!!this.model.get("loadingOverrides"))},d.prototype.clickRow=function(e){var t,i,n;return i=o(e.target),i.parents(".ig-admin").length>0||i.hasClass("ig-title")?void 0:(t=i.parents("li"),n=t.find(".ig-title"),n.length>0?this.redirectTo(n.attr("href")):void 0)},d.prototype.redirectTo=function(e){return location.href=e},d.prototype.onDelete=function(e){return e.preventDefault(),confirm(this.messages.confirm)?this["delete"]():void 0},d.prototype["delete"]=function(){return this.model.destroy(),this.$el.remove()},d.prototype.observeModel=function(){return this.model.on("change:published",this.updatePublishState),this.model.on("change:loadingOverrides",this.render)},d.prototype.updatePublishState=function(){return this.$(".ig-row").toggleClass("ig-published",this.model.get("published"))},d.prototype.canManage=function(){return ENV.PERMISSIONS.manage},d.prototype.toJSON=function(){var e,t=this;return e=n.extend(this.model.toJSON(),this.options),e.quiz_menu_tools=ENV.quiz_menu_tools,n.each(e.quiz_menu_tools,function(e){return e.url=e.base_url+("&quizzes[]="+t.model.get("id"))}),this.model.get("multiple_due_dates")&&(e.selector=this.model.get("id"),e.link_text=this.messages.multipleDates,e.link_href=this.model.get("url")),e},d}(s.View)})}).call(this);