(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function o(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};define(["jquery","Backbone","compiled/views/content_migrations/subviews/DaySubstitutionView","compiled/models/DaySubstitution","jst/content_migrations/subviews/DateShift"],function(e,o,i,a,r){var d,s;return d=function(e){function o(){return this.updateNewDates=t(this.updateNewDates,this),this.createDaySubView=t(this.createDaySubView,this),this.toggleShiftContent=t(this.toggleShiftContent,this),this.toggleContent=t(this.toggleContent,this),s=o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.template=r,o.child("daySubstitution","#daySubstitution"),o.optionProperty("oldStartDate"),o.optionProperty("oldEndDate"),o.optionProperty("addHiddenInput"),o.prototype.els={".dateAdjustContent":"$dateAdjustContent","#dateAdjustCheckbox":"$dateAdjustCheckbox",".dateShiftContent":"$dateShiftContent","#dateShiftOption":"$dateShiftOption","#oldStartDate":"$oldStartDate","#oldEndDate":"$oldEndDate","#newStartDate":"$newStartDate","#newEndDate":"$newEndDate","#daySubstitution":"$daySubstitution"},o.prototype.events={"click #dateAdjustCheckbox":"toggleContent","click #dateRemoveOption":"toggleShiftContent","click #dateShiftOption":"toggleShiftContent","click #addDaySubstitution":"createDaySubView"},o.prototype.afterRender=function(){var t=this;return this.$el.find("input[type=text]").datetime_field({addHiddenInput:this.addHiddenInput}),this.oldStartDate&&this.$newStartDate.val(this.oldStartDate).trigger("change"),this.oldEndDate&&this.$newEndDate.val(this.oldEndDate).trigger("change"),this.collection.on("remove",function(){return t.$el.find("#addDaySubstitution").focus()}),this.toggleContent()},o.prototype.toggleContent=function(){var t;return t=this.$dateAdjustCheckbox.is(":checked"),t&&this.toggleShiftContent(),this.$dateAdjustContent.toggle(t)},o.prototype.toggleShiftContent=function(){var t;return t=this.$dateShiftOption.is(":checked"),this.model.daySubCollection=t?this.collection:null,this.$dateShiftContent.toggle(t)},o.prototype.createDaySubView=function(t){var e,n;return t.preventDefault(),this.collection.add(new a),e=null!=(n=this.collection.last())?n.view.$el:void 0,e.find("select").first().focus()},o.prototype.updateNewDates=function(t){return this.$oldStartDate.val(t.start_at).trigger("change"),this.$oldEndDate.val(t.end_at).trigger("change")},o}(o.View)})}).call(this);