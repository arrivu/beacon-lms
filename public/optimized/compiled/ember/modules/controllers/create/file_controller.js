(function(){define(["./base_controller","i18n!create_module_item_quiz","../../models/item","ic-ajax"],function(e,t,n,r){var a,o;return o=r.request,a=e.extend({text:{file:t.t("file_to_upload","File to upload")},createItem:function(){var e,t,r,a=this;return e=this.get("files")[0],r=n.createRecord({title:e.name,type:"File"}),t={name:e.name,size:e.size,content_type:e.type},o({url:"/api/v1/courses/"+ENV.course_id+"/files",type:"post",data:t}).then(function(t){var n,o,i,s,u,l;i=t.upload_params,s=t.upload_url,n=new FormData,l=new XMLHttpRequest;for(o in i)u=i[o],n.append(o,u);return n.append("file",e),l.open("POST",s,!0),l.onload=function(e){var t;return 200!==e.target.status?a.handleContentError(r):(t=$.parseJSON(e.target.response),r.set("content_id",t.id),r.save())},l.send(n)},function(){return a.handleContentError(r)}),r}})})}).call(this);