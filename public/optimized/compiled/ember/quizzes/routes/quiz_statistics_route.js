(function(){define(["ember","../mixins/redirect","i18n!quiz_statistics_route","../shared/title_builder","../mixins/routes/loading_overlay"],function(t,e,i,r,n){var o,s;return s=t.RSVP,o=/operation not available for large quizzes/,t.Route.extend(e,n,{beforeModel:function(){return this.set("error",null),this.validateRoute("canManage","quiz.show")},model:function(){var t,e=this;return t=this.modelFor("quiz"),t.get("quizStatistics").then(function(t){return t.sortBy("createdAt").get("lastObject")}).then(function(e){return t.get("quizReports").then(function(){return e})})["catch"](function(t){var i;return i=(t||{}).jqXHR,i&&i.status&&i.responseText.match(o)?e.set("error","stats_too_large"):e.set("error","unknown"),s.resolve([])})},afterModel:function(){var t,e;return e=this.modelFor("quiz").get("title"),t=i.t("quiz_statistics","Statistics"),r([e,t])},actions:{showDiscriminationIndexHelp:function(){return this.render("quiz/statistics/questions/multiple_choice/discrimination_index_help",{into:"application",outlet:"modal"})},didTransition:function(){var t;return(t=this.get("error"))?this.controllerFor("quizStatistics").set("error",t):this.modelFor("quizStatistics").get("uniqueCount")<1?this.controllerFor("quizStatistics").set("error","stats_empty"):void 0}}})})}).call(this);