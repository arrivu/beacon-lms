(function(){define(["i18n!react_files","jquery","compiled/models/Progress","compiled/models/Folder"],function(e,r,t,n){var o;return o=function(o,i){var p,s,l,a,c,d,u,f,g,x,m;for(l=i.contextType,s=i.contextId,c=[],d=[],x=0,m=o.length;m>x;x++)u=o[x],u instanceof n?d.push(u.id):c.push(u.id);return g="/api/v1/"+l+"/"+s+"/content_exports",p=r('<div style="position: fixed; top: 4px; left: 50%; margin-left: -120px; width: 240px; z-index: 11; text-align: center; box-sizing: border-box; padding: 8px;" class="alert alert-info">'),f=function(t){var n;return n=e.t("progress_message","Preparing download: %{percent}% complete",{percent:t.completion}),p.appendTo("body").text(n),r.screenReaderFlashMessage(n)},a={export_type:"zip",select:{files:c,folders:d}},r.post(g,a).pipe(function(e){return new t({url:e.progress_url}).poll().progress(f)}).pipe(function(e){var t;return t=e.context_id,r.get(""+g+"/"+t)}).pipe(function(e){return window.location=e.attachment.url}).fail(function(){return r.flashError(e.t("progress_error","An error occured trying to prepare download, please try again."))}).always(function(){return p.remove()})}})}).call(this);