(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,o=function(e,o){function r(){this.constructor=e}for(var n in o)t.call(o,n)&&(e[n]=o[n]);return r.prototype=o.prototype,e.prototype=new r,e.__super__=o.prototype,e};define(["jquery","compiled/models/File","./BaseUploader","jquery.ajaxJSON"],function(t,r,n){var i,s;return i=function(n){function i(){return this.addFileToCollection=e(this.addFileToCollection,this),this.onUploadPosted=e(this.onUploadPosted,this),s=i.__super__.constructor.apply(this,arguments)}return o(i,n),i.prototype.onUploadPosted=function(e){var o,r,n,i=this;return e.target.status>=400?void this.deferred.reject():(n=this.uploadData.upload_params.success_url,n?t.getJSON(n).then(function(e){var t;return t=i.addFileToCollection(e),i.deferred.resolve(t)}):(r=t.parseJSON(e.target.response),o=this.addFileToCollection(r),this.deferred.resolve(o)))},i.prototype.addFileToCollection=function(e){var t,o,n;return n=new r(e,"no/url/needed/"),this.folder.files.add(n),"overwrite"===this.options.dup&&(t=this.options.name||this.file.name,o=this.folder.files.findWhere({display_name:t}),o&&this.folder.files.remove(o)),n},i}(n)})}).call(this);