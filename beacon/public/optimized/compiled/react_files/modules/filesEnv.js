(function(){define(["compiled/models/Folder","compiled/str/splitAssetString"],function(t,e){var n,o,c,i;return n=ENV.FILES_CONTEXTS||[],o={contexts:n,contextsDictionary:n.reduce(function(t,n){var o,c,i;return i=e(n.asset_string),c=i[0],o=i[1],n.contextType=c,n.contextId=o,t[[c,o].join("_")]=n,t},{}),showingAllContexts:window.location.pathname.match(/^\/files/),contextType:null!=(c=n[0])?c.contextType:void 0,contextId:null!=(i=n[0])?i.contextId:void 0,rootFolders:n.map(function(e){var n;return n=new t({custom_name:e.name,context_type:e.contextType.replace(/s$/,""),context_id:e.contextId}),n.url="/api/v1/"+e.contextType+"/"+e.contextId+"/folders/root",n.fetch(),n})},o.userHasPermission=function(e,n){var c,i,s,l,r;return e?(e instanceof t?(i=e,c=((null!=i?i.get("context_type"):void 0)+"s_"+(null!=i?i.get("context_id"):void 0)).toLowerCase()):e.contextType&&e.contextId&&(c=(""+e.contextType+"_"+e.contextId).toLowerCase()),null!=(s=o.contextsDictionary)&&null!=(l=s[c])&&null!=(r=l.permissions)?r[n]:void 0):!1},o.baseUrl=o.showingAllContexts?"/files":"/"+o.contextType+"/"+o.contextId+"/files",o})}).call(this);