(function(){define(["i18n!upload_drop_zone","react","compiled/react/shared/utils/withReactDOM","../modules/FileOptionsCollection","compiled/models/Folder"],function(t,e,n,r,o){var a;return a=e.createClass({displayName:"UploadDropZone",propTypes:{currentFolder:e.PropTypes.instanceOf(o)},getInitialState:function(){return{active:!1}},componentDidMount:function(){return this.getParent().addEventListener("dragenter",this.onParentDragEnter),document.addEventListener("dragenter",this.killWindowDropDisplay),document.addEventListener("dragover",this.killWindowDropDisplay),document.addEventListener("drop",this.killWindowDrop)},componentWillUnmount:function(){return this.getParent().removeEventListener("dragenter",this.onParentDragEnter),document.removeEventListener("dragenter",this.killWindowDropDisplay),document.removeEventListener("dragover",this.killWindowDropDisplay),document.removeEventListener("drop",this.killWindowDrop)},onDragEnter:function(t){return this.shouldAcceptDrop(t.dataTransfer.types)?(this.state.active||this.setState({active:!0}),t.dataTransfer.dropEffect="copy",t.preventDefault(),t.stopPropagation(),!1):!0},onDragLeave:function(){return this.setState({active:!1})},onDrop:function(t){return r.setFolder(this.props.currentFolder),r.setOptionsFromFiles(t.dataTransfer.files,!0),this.setState({active:!1}),t.preventDefault(),t.stopPropagation(),!1},onParentDragEnter:function(t){return this.shouldAcceptDrop(t.dataTransfer.types)&&!this.state.active?this.setState({active:!0}):void 0},killWindowDropDisplay:function(t){return t.target!==this.getParent()?t.preventDefault():void 0},killWindowDrop:function(t){return t.preventDefault()},shouldAcceptDrop:function(t){var e,n,r;for(n=0,e=!1;n<t.length&&(r=t[n],!(e="Files"===r));)n++;return e},getParent:function(){return this.getDOMNode().parentElement},buildNonActiveDropZone:function(){return div({className:"UploadDropZone"},"")},buildInstructions:function(){return div({className:"UploadDropZone__instructions"},i({className:"icon-upload UploadDropZone__instructions--icon-upload"}),div({},p({className:"UploadDropZone__instructions--drag"},t.t("drop_to_upload","Drop items to upload"))))},buildDropZone:function(){return div({className:"UploadDropZone UploadDropZone__active",onDrop:this.onDrop,onDragLeave:this.onDragLeave,onDragOver:this.onDragEnter,onDragEnter:this.onDragEnter},this.buildInstructions())},render:n(function(){return this.state.active?this.buildDropZone():this.buildNonActiveDropZone()})})})}).call(this);