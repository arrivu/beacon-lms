(function(){define(["underscore","i18n!react_files","react","react-router","../mixins/BackboneMixin","compiled/react/shared/utils/withReactDOM","./FriendlyDatetime","./ItemCog","./FilesystemObjectThumbnail","compiled/util/friendlyBytes","compiled/models/Folder","compiled/fn/preventDefault","./PublishCloud"],function(e,t,s,o,l,r,n,d,p,c,m,u,g){var h,f;return f=o.Link,h=s.createClass({displayName:"FolderChild",mixins:[l("model")],getInitialState:function(){return{editing:this.props.model.isNew()}},componentDidMount:function(){return this.state.editing?this.focusNameInput():void 0},startEditingName:function(){return this.setState({editing:!0},this.focusNameInput)},focusNameInput:function(){return this.refs.newName.getDOMNode().focus()},saveNameEdit:function(){return this.props.model.save({name:this.refs.newName.getDOMNode().value}),this.setState({editing:!1})},cancelEditingName:function(){return this.props.model.isNew()&&this.props.model.collection.remove(this.props.model),this.setState({editing:!1})},getAttributesForRootNode:function(){var e,t,s=this;return e={onClick:this.props.toggleSelected,className:"ef-item-row                   "+(this.props.isSelected?"ef-item-selected":void 0)+"                   "+(this.state.isActiveDragTarget?"activeDragTarget":void 0),role:"row","aria-selected":this.props.isSelected,draggable:!0,onDragStart:function(){var e;return s.props.isSelected||s.props.toggleSelected(),(e=s.props.dndOptions).onItemDragStart.apply(e,arguments)}},this.props.model instanceof m&&(t=function(e){return s.state.isActiveDragTarget!==e?s.setState({isActiveDragTarget:e}):void 0},e.onDragEnter=e.onDragOver=function(e){return s.props.dndOptions.onItemDragEnterOrOver(e,t(!0))},e.onDragLeave=e.onDragEnd=function(e){return s.props.dndOptions.onItemDragLeaveOrEnd(e,t(!1))},e.onDrop=function(e){return s.props.dndOptions.onItemDrop(e,s.props.model,t(!1))}),e},render:r(function(){var e,s,o=this;return div(this.getAttributesForRootNode(),label({className:"screenreader-only",role:"gridcell"},input({type:"checkbox",className:"multiselectable-toggler",checked:this.props.isSelected,onChange:function(){}}),t.t("labels.select","Select This Item")),div({className:"ef-name-col ellipsis",role:"rowheader"},this.state.editing?form({className:"ef-edit-name-form",onSubmit:u(this.saveNameEdit)},input({type:"text",ref:"newName",className:"input-block-level",placeholder:t.t("name","Name"),"aria-label":t.t("folder_name","Folder Name"),defaultValue:this.props.model.displayName(),onKeyUp:function(e){return 27===e.keyCode?o.cancelEditingName():void 0}}),button({type:"button",className:"btn btn-link ef-edit-name-cancel","aria-label":t.t("cancel","Cancel"),onClick:this.cancelEditingName},i({className:"icon-x"}))):this.props.model instanceof m?f({to:"folder",className:"media",params:{splat:this.props.model.urlPath()}},span({className:"pull-left"},p({model:this.props.model})),span({className:"media-body"},this.props.model.displayName())):a({href:this.props.model.get("url"),className:"media"},span({className:"pull-left"},p({model:this.props.model})),span({className:"media-body"},this.props.model.displayName()))),div({className:"screenreader-only",role:"gridcell"},this.props.model instanceof m?t.t("folder","Folder"):this.props.model.get("content-type")),div({className:"ef-date-created-col",role:"gridcell"},n({datetime:this.props.model.get("created_at")})),div({className:"ef-date-modified-col",role:"gridcell"},n({datetime:this.props.model.get("updated_at")})),div({className:"ef-modified-by-col ellipsis",role:"gridcell"},a({href:null!=(e=this.props.model.get("user"))?e.html_url:void 0,className:"ef-plain-link"},null!=(s=this.props.model.get("user"))?s.display_name:void 0)),div({className:"ef-size-col",role:"gridcell"},c(this.props.model.get("size"))),div({className:"ef-links-col",role:"gridcell"},g({model:this.props.model,ref:"publishButton",userCanManageFilesForContext:this.props.userCanManageFilesForContext}),d({model:this.props.model,startEditingName:this.startEditingName,userCanManageFilesForContext:this.props.userCanManageFilesForContext})))})})})}).call(this);