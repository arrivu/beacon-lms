(function(){define(["ember","ic-sortable","jquery","ic-droppable","../lib/accepts_drop_mixin","../lib/store"],function(e,t,i,n,o,r){var a;return n=n["default"],a=e.Component.extend(t["default"],o,{accepts:["text/ic-module","text/ic-module-item"],classNameBindings:["locked","acceptTypeClassName"],classNames:["item-group-condensed"],acceptTypeClassName:function(){var e;return(e=this.get("accept-type"))?e.replace(/\//,"-"):void 0}.property("accept-type"),locked:function(){return this.get("module.locked")}.property("module.locked"),draggable:"false",setEventData:function(e){return this.makeGhost(e),e.dataTransfer.setData("text/ic-module",this.get("module.id"))},makeGhost:function(t){var n,o,r;return o=this.get("element").getBoundingClientRect(),r=t.originalEvent.clientX-o.left,n=i('<div class="module-ghost"/>'),n.html(this.get("module.name")),n.appendTo(document.body),t.dataTransfer.setDragImage(n[0],r,10),e.run.later(n,"remove",0)},isSelfDrop:function(){var e;return e=this.$(),e.has(n._currentDrag).length>0},validateDragEvent:function(e){var t;return t=e.dataTransfer.types,t.contains("text/ic-module")&&this.isSelfDrop(e)?!1:t.contains("text/ic-module-item")&&0!==this.get("module.items.length")?!1:this._super(e)},"accept:text/ic-module":function(e,t){var i,n,o;return o=this.get("modules"),i=o.findBy("id",parseInt(t,10)),o.removeObject(i),n=o.indexOf(this.get("module")),"after"===this.get("droppedPosition")&&(n+=1),o.insertAt(n,i),this.sendAction("on-reorder",o.mapBy("id"))},"accept:text/ic-module-item":function(e,t){var i,n;return i=r.find("item",t),n=r.find("module",i.module_id),n.items.removeObject(i),i.module_id=this.get("module.id"),this.get("module.items").addObject(i),r.syncModuleItemsOrder(this.get("module.id"))}})})}).call(this);