(function(){define(["ember","../models/module","ic-ajax","../lib/store"],function(e,t,o,n){var r,u;return u=o.request,r=e.Controller.extend({newModule:{name:"Noname"},modules:[],actions:{moveItem:function(e,t,o){return n.moveItem(e,t,o),n.syncModuleItemsOrder(t)},syncModulesOrder:function(e){var t,o;return o="/courses/"+ENV.course_id+"/modules/reorder",t={order:e.join(",")},u({url:o,data:t,type:"post"}).then(function(e){var t,o,r,u,d,s,i;for(i=[],u=0,d=e.length;d>u;u++)o=e[u],s=o.context_module,r=s.position,t=s.id,i.push(n.find("module",t).set("position",r));return i})},createModule:function(){var e;return e=t.createRecord(this.get("newModule")),e.set("isNew",!0),this.get("modules").addObject(e),this.set("newModule",{})}}})})}).call(this);