(function(){define(["i18n!shared.flash_notices","jquery","underscore","compiled/fn/preventDefault","str/htmlEscape","jqueryui/effects/drop","vendor/jquery.cookie"],function(n,e,r,t,s){var o,i,u,c,l,a,f;return o=[],i=[],l=function(){return o=e("#flash_message_holder"),0!==o.length?(i=e("#flash_screenreader_holder"),o.on("click",".close_link",t(function(){})),o.on("click","li",function(){var n;return n=e(this),n.hasClass("no_close")?void 0:(n.hasClass("unsupported_browser")&&e.cookie("unsupported_browser_dismissed","1"),n.stop(!0,!0).remove())})):void 0},l(),u=function(n){return n.hasOwnProperty("html")?n.html:s(n)},f=function(n,r){var t;return t=e("<span>"+u(r)+"</span>"),t.appendTo(i),window.setTimeout(function(){return t.remove()},2e4)},c=function(t,s,i,c){var l;return null==c&&(c={}),l=e('<li class="ic-flash-'+t+'">\n  <i></i>\n  '+u(s)+'\n  <a href="#" class="close_link icon-end">'+n.t("close","Close")+"</a>\n</li>"),l.appendTo(o).css(r.extend({zIndex:1},c)).show("drop",{direction:"up"},"fast",function(){return e(this).css("z-index",2)}).delay(i||7e3).animate({"z-index":1},0).fadeOut("slow",function(){return e(this).slideUp("fast",function(){return e(this).remove()})}),setTimeout(function(){return f(t,s)},100)},e.flashMessage=function(n,e){return null==e&&(e=3e3),c("success",n,e)},e.flashError=function(n,e){return c("error",n,e)},e.flashWarning=function(n,e){return null==e&&(e=3e3),c("warning",n,e)},e.screenReaderFlashMessage=function(n){return f("success",n)},e.screenReaderFlashError=function(n){return f("error",n)},e.initFlashContainer=function(){return l()},a=function(){var n,e,r,t,s;if(null!=ENV.notices){for(t=ENV.notices,s=[],e=0,r=t.length;r>e;e++)n=t[e],s.push(c(n.type,n.content));return s}},e(function(){return setTimeout(a,500)})})}).call(this);